{"version":3,"file":"dreamid.min.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFV,EAAyBC,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,KCL/C,SAASC,EAAKC,GA0BzB,OAzBAA,EAAaC,cAAe,EAE5BD,EAAaE,iBAAiB,WAAYC,IAEtC,GAA4B,sCAAvBA,EAAYC,OAAiD,CAC9D,IAAIC,EAAcF,EAAYG,KAC9B,GAAoB,MAAfD,GAAmDE,MAA5BF,EAAYG,aACpCR,EAAaC,cAAe,OAEzB,GAAoB,MAAfI,GAA8C,OAAvBA,EAAYI,OAAiB,CAGxD,MAAMC,EAAQ,IAAIC,YAAY,yBAA0B,CAAEN,YAAaA,IACvEL,EAAaY,cAAcF,EAC/B,KAAO,CAGH,MAAMA,EAAQ,IAAIC,YAAY,wBAAyB,CAAEN,YAAaA,IACtEL,EAAaY,cAAcF,EAC/B,CACR,KAGJG,QAAQC,IAAI,yBAEL,CACX,CC3Be,SAASC,EAAOf,EAAcgB,GACzC,OAAO,IAAIC,SAASC,IAChB,IAAIC,EAAS,qCAAuCH,EAChDI,EAAcpB,EAAaqB,KAAKF,EAAQ,aAAc,wBAE1D,IAAIG,EAAQC,aAAa,KACrBH,EAAYI,YAAY,CACpBhB,aAAc,QACf,qCAE+B,GAA7BR,EAAaC,eACdwB,cAAcH,GACdJ,EAAQ,qBAGRE,EAAYM,SACZb,QAAQC,IAAI,gBACZW,cAAcH,GACdJ,EAAQ,uBACZ,GACD,IAAK,GAEhB,C","sources":["webpack://dreamid/webpack/bootstrap","webpack://dreamid/webpack/runtime/define property getters","webpack://dreamid/webpack/runtime/hasOwnProperty shorthand","webpack://dreamid/webpack/runtime/make namespace object","webpack://dreamid/./src/init.js","webpack://dreamid/./src/signIn.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function init(parentWindow) {\r\n    parentWindow.handshakeDID = false;\r\n\r\n    parentWindow.addEventListener('message', (returnValue) => {\r\n//        console.log('what message : ', returnValue);\r\n        if ( returnValue.origin === 'https://dreamid.shenlanmengtu.com' ) {\r\n            let accountInfo = returnValue.data;\r\n            if ( accountInfo != null && accountInfo.didhandshake != undefined ) {\r\n                parentWindow.handshakeDID = true;\r\n//                console.log('handshake success', accountInfo.data);\r\n            } else if ( accountInfo != null && accountInfo.result === 'OK') {\r\n//                    console.log('DID success', accountInfo);\r\n    \r\n                    const event = new CustomEvent(\"DreamIDSignInOnSuccess\", { accountInfo: accountInfo });\r\n                    parentWindow.dispatchEvent(event);                        \r\n                } else {\r\n//                    console.log('DID failed', accountInfo);\r\n\r\n                    const event = new CustomEvent(\"DreamIDSignInOnFailed\", { accountInfo: accountInfo });\r\n                    parentWindow.dispatchEvent(event);                        \r\n                }\r\n        }\r\n    });\r\n\r\n    console.log('initialized dreamID.');\r\n\r\n    return true;\r\n}","export default function signIn(parentWindow, params) {\r\n    return new Promise( resolve => {\r\n        let DIDURL = 'https://dreamid.shenlanmengtu.com?' + params;\r\n        let loginWindow = parentWindow.open(DIDURL, 'DID SignIn', 'height=800,width=600');\r\n\r\n        var timer = setInterval( () => {\r\n            loginWindow.postMessage({\r\n                didhandshake: 'true'\r\n            }, 'https://dreamid.shenlanmengtu.com');\r\n\r\n            if ( parentWindow.handshakeDID == true ) {\r\n                clearInterval(timer);\r\n                resolve('start DID signin');\r\n            }\r\n\r\n            if (loginWindow.closed) {\r\n                console.log('DID canceled');\r\n                clearInterval(timer);\r\n                resolve('canceled DID signin');\r\n            }\r\n        }, 1000);          \r\n    });\r\n}"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","init","parentWindow","handshakeDID","addEventListener","returnValue","origin","accountInfo","data","undefined","didhandshake","result","event","CustomEvent","dispatchEvent","console","log","signIn","params","Promise","resolve","DIDURL","loginWindow","open","timer","setInterval","postMessage","clearInterval","closed"],"sourceRoot":""}